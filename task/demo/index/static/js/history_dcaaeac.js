define("common:widget/ui/history/history.js",function(e,o,t){var r="",n="",s=e("common:widget/com/componentManager.js"),i={search:[],poi:[]},a={nowTpl:null,tplOpts:{},record:function(e){e=e||{};var o="/wolfman/static/common/newhistory_68991e2.html",t=document.fmHistory,r=e.url;r&&e.history!==!0&&(this.pushStack(this.nowTpl),r=encodeURIComponent(r),this.nowTpl=r,t.url.value=r,T.g("wHistory").src=T.browser.ie>0||T.browser.chrome>0||T.browser.safari>0?o+"?url="+encodeURIComponent(r):o+"?url="+encodeURIComponent(r),e._mapInfo={center:map.getCenter(),level:map.getZoom()},this.tplOpts[r]=e)},pushStack:function(e){e&&(/^poi%3A/.test(e)?i.poi.push(e):/^fav%3A/.test(e)?i.search.push(e):(i.search.push(e),this.setQuery(e)))},reload:function(o){this.nowTpl=o;var t=this.tplOpts[o];if(null==t&&(t={}),null==t.cinfo&&(t.cinfo={cityInit:1}),t.record=!1,o=decodeURIComponent(o),/^poi:/.test(o)){var r=o.split(":")[1],n=e("poidetail:widget/libs/poiDetailMgr/poiDetailMgr.js");n.create({uid:r},{record:!1}),i.poi.pop()}else if(/^fav:/.test(o)){var a=e("common:widget/ui/fav/favMgr.js");a.openPanel({record:!1}),i.search.pop()}else s.go(o,t),i.search.pop()},setQuery:function(e){if(window.currentComponent){var o=window.currentComponent._className;switch(o){case"RouteAddr":case"BusTrans":case"NavTrans":case"NavWalk":case"NavBike":case"CBusTrans":n=decodeURIComponent(e);break;case"PoiSearch":case"Clarify":case"PoiAddr":r=decodeURIComponent(e)}}},getSearchQuery:function(){return r},getRouteQuery:function(){return n},clearRouteQuery:function(){n=""},clearSearchQuery:function(){r=""}};window.MapHistory=a,t.exports=a});