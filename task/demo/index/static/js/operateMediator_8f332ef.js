define("common:widget/ui/operateMediator/operateMediator.js",function(o,a,n){var i=0,t=1,e=o("common:widget/ui/ui3MobileDownload/ui3MobileDownload.js"),p={init:function(){{var o=this;window._OLR.uid}T.ajax("/",{data:{qt:"operateData",getOpModules:["op1","op2","op3","op4","op5","op6","op7"]},dataType:"json",traditional:!0,success:function(a){if(a&&0===a.status){var n=a.data;n&&(T.each(n,function(o,a){listener.trigger("operateMediator."+o,"init",a)}),listener.on("operateMediator",function(a,i){o.pipe(i,n,a)}))}},error:function(){o.retry()}})},retry:function(){i>=t||(i++,this.init())},pipe:function(o,a,n){var i=a[o.opid],t=a.op7;if(i){var e=i.bannerImg,p=i.backgroundImg;if(e){T.extend(i,o,t),p||(i.backgroundImg="//webmap0.bdimg.com/wolfman/static/common/images/ui3/luhan_23282dd.png");var r=i.contentList;r&&r.length>4&&(r=r.slice(0,4)),"function"==typeof this[n]&&this[n].call(this,i),"display"===n?addStat("op-banner-"+i.opid,"show",{}):"openPop"===n&&addStat("op-banner-"+i.opid,"click",{})}}},initOpBanner:function(o){T.each(o,function(o,a){listener.trigger("operateMediator","display",{opid:a.opid,opTarget:a.bannerWrap}),a.bannerWrap.delegate("img","click",function(){listener.trigger("operateMediator","openPop",{opid:a.opid})}),a.bannerWrap.delegate("a","click",function(){var o=T(this);listener.trigger("operateMediator","download",{opTarget:o,opid:a.opid})})})},display:function(o){o.opTarget.addClass("op-banner").attr("opid",o.opid).show().append('<img src="'+o.bannerImg+'" />')},openPop:function(){},download:function(o){var a=o.opTarget;"pc2MoAndriod"===a.attr("class")?(T("[name=andriodApk]").attr("src","http://map.baidu.com/maps/download/index.php?app=map&qudao="+o.qudao),e.openDownloadPop(o),addStat("op-banner-"+o.opid+"-bannerAndriod","click",{})):"pc2MoIphone"===a.attr("class")&&(window.open("http://itunes.apple.com/cn/app/id452186370?ls=1&mt=8"),e.openDownloadPop(o),addStat("op-banner-"+o.opid+"-bannerIos","click",{}))}};n.exports=p});