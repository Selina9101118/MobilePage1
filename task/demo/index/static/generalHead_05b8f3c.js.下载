define("poidetail:widget/ui/generalHead/generalHead.js",function(require,exports,module){var style='@charset "UTF-8";.poidetail-widget-generalHead{}.poidetail-widget-generalHead .generalHead-header{background-color:#3385FF}.poidetail-widget-generalHead .clearfloat:after{display:block;clear:both;content:"";visibility:hidden;height:0}.poidetail-widget-generalHead .clearfloat{zoom:1}.poidetail-widget-generalHead .clampword{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.poidetail-widget-generalHead .animation-common{-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out}.poidetail-widget-generalHead .animation-heightrelease{-webkit-transition:height .5s;transition:height .5s;height:45px!important}.poidetail-widget-generalHead .animation-heightadd{height:96px!important;-webkit-transition:height .5s;transition:height .5s}.poidetail-widget-generalHead .animation-paddingadd{height:76px!important;left:0!important;-webkit-transition:height .5s,left .5s;transition:height .5s,left .5s}.poidetail-widget-generalHead .animation-paddingrelease{height:26px!important;left:54px!important;-webkit-transition:height .5s,left .5s;transition:height .5s,left .5s}.poidetail-widget-generalHead .animation-aoitag-hide{opacity:0}.poidetail-widget-generalHead .animation-visittag-hide{opacity:0}.poidetail-widget-generalHead .animation-visittag-show{opacity:1}.poidetail-widget-generalHead .animation-aoitag-show{opacity:1}.poidetail-widget-generalHead .generalHead-left-header{float:left;display:inline-block;width:67%;height:96px;border-top-left-radius:2px}.poidetail-widget-generalHead .generalHead-left-header.animation-heightrelease .generalHead-left-header-title .generalHead-titlename{max-width:160px}.poidetail-widget-generalHead .generalHead-left-header.animation-heightrelease .generalHead-left-header-title .generalHead-titlename.with-verify{max-width:90px}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-title{color:#fff;font-size:14px;margin:15px 0 0 15px;white-space:nowrap}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-title .generalHead-titlename{display:inline-block;overflow:hidden;max-width:225px}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-title .generalHead-titlename.with-verify{max-width:150px}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-title .business-vertify{display:inline-block;top:-3px;position:relative;width:72px;height:18px;background-color:#0066FE;margin-left:3px;color:#fff}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-title .business-vertify .vertifybusiness-icon{display:inline-block;top:2px;left:4px;width:14px;height:14px;background-position:-184px -80px;position:relative}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-title .business-vertify .vertifybusiness-text{line-height:18px;font-size:12px;margin-left:3px;position:relative;top:-1px}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-visit{color:#fff;margin:15px 0 0 15px}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-visit .left-header-know-visit{color:#BCBCBC}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-visit .left-header-reference-label{margin-left:10px}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-aoitag{margin:13px 0 0 15px}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-aoitag .left-header-tag,.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-aoitag .left-header-aoitag{color:#fff;font-size:12px}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-aoitag .left-header-stdtag{color:#fff;font-size:12px;left:10px}.poidetail-widget-generalHead .generalHead-padding{border-right:1px solid #428DFC;position:relative;width:1px;top:12px;height:72px;float:left}.poidetail-widget-generalHead .generalHead-pic{background-image:url(//webmap0.bdimg.com/wolfman/static/poidetail/images/generalInfo/detail-general-info_7a530db.png);background-repeat:no-repeat}.poidetail-widget-generalHead .generalHead-right-header{border-top-left-radius:2px;display:inline-block;height:96px;float:right;width:32%;position:relative}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route:hover{background:#fff;cursor:pointer}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route:hover.generalHead-right-route-to .generalHead-right-route-icon{background-position:0 -354px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route:hover.generalHead-right-route-from .generalHead-right-route-icon{background-position:-28px -354px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route:hover .generalHead-right-route-text{color:#3385FF}.poidetail-widget-generalHead .generalHead-right-header.animation-heightrelease .generalHead-right-route-split{height:25px;background:#428dfc;width:1px;position:absolute;left:19px;top:10px;opacity:1}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route-split{opacity:0;-webkit-transition:opacity .3s;transition:opacity .3s}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route{border-radius:2px;margin:0 0 0 13px;width:84px;height:29px;border:1px solid #85B6FF;position:relative;-webkit-transition:top .3s,width .3s,border .3s,left .3s,margin .3s,right .3s;transition:top .3s,width .3s,border .3s,left .3s,margin .3s,right .3s}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.generalHead-right-route-to{top:12px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.generalHead-right-route-to .generalHead-right-route-icon{background-position:-14px -354px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.generalHead-right-route-to .generalHead-right-route-text{left:18px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.generalHead-right-route-from{top:22px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.generalHead-right-route-from .generalHead-right-route-icon{background-position:-42px -354px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.animation-route-button-hide{top:8px;border:0;margin:0;position:absolute;border:0}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.animation-route-button-hide.generalHead-right-route-to{left:-58px;width:73px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.animation-route-button-hide.generalHead-right-route-to .generalHead-right-route-text{left:13px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.animation-route-button-hide.generalHead-right-route-from{right:10px}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route .generalHead-right-route-icon{width:13px;height:20px;left:9px;top:5px;display:inline-block;position:relative}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route .generalHead-right-route-text{color:#fff;font-size:12px;left:13px;position:relative}@media only screen and (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route .generalHead-right-route-icon,.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-title .business-vertify .vertifybusiness-icon{background-image:url(//webmap0.bdimg.com/wolfman/static/poidetail/images/generalInfo/general-infox2_5de0e66.png);background-size:89px 20px}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-title .business-vertify .vertifybusiness-icon{width:11px;height:11px;top:1px;background-position:-78px 0}.poidetail-widget-generalHead .generalHead-left-header .generalHead-left-header-title .business-vertify .vertifybusiness-text{top:0}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.generalHead-right-route-to .generalHead-right-route-icon{background-position:-13px 0}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route.generalHead-right-route-from .generalHead-right-route-icon{background-position:-39px 0}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route:hover.generalHead-right-route-from .generalHead-right-route-icon{background-position:-26px 0}.poidetail-widget-generalHead .generalHead-right-header .generalHead-right-route:hover.generalHead-right-route-to .generalHead-right-route-icon{background-position:0 0}}',poiUtl=require("poidetail:widget/libs/poiDetailUtil/poiDetailUtil.js"),searchbox=require("common:widget/ui/searchBox/searchBox.js"),mapUtil=require("common:widget/ui/mapUtil/mapUtil.js"),util=require("common:widget/ui/util/util.js"),constants=require("common:widget/ui/constant/Constant.js"),routeSearchbox=require("common:widget/ui/searchBox/RouteSearchbox.js");require.loadCss({content:style,name:"generalHead"}),module.exports=Widget.extend({render:function(data){try{var template=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("<div class=\"poidetail-widget-generalHead\">    <div id='generalheader' class='generalHead-header clearfloat'>        <div class='generalHead-left-header animation-common'>            "),datas.name&&(_template_fun_array.push('                <div class="generalHead-left-header-title">                    <span title="',"undefined"==typeof name?"":baidu.template._encodeHTML(name),'" class="clampword generalHead-titlename ',"undefined"==typeof(datas.verify?"with-verify":"")?"":baidu.template._encodeHTML(datas.verify?"with-verify":""),'">',"undefined"==typeof name?"":baidu.template._encodeHTML(name),"</span>                    "),datas.verify&&_template_fun_array.push("                        <a href=\"http://biaozhu.baidu.com/?from=vmark#/\" target=\"_blank\" class='business-vertify'>                            <span class='generalHead-pic vertifybusiness-icon'></span>                            <span class='vertifybusiness-text'>商户认领</span>                        </a>                    "),_template_fun_array.push("                </div>            ")),_template_fun_array.push("            "),(ext.detail_info.overall_rating||ext.detail_info.price)&&(_template_fun_array.push("            <div class='generalHead-left-header-visit time-delay animation-common'>                "),ext.detail_info.overall_rating&&_template_fun_array.push("                    <span class='left-header-visit'>","undefined"==typeof ext.detail_info.overall_rating?"":baidu.template._encodeHTML(ext.detail_info.overall_rating),"</span>                    <span class='left-header-know-visit'>/ 5.0</span>                "),_template_fun_array.push("                "),"hotel"===ext.src_name&&ext.detail_info.pc_realtime_price?_template_fun_array.push("                    <span class='left-header-reference-label'>参考价:</span>                    <span class='left-header-reference-price'>￥","undefined"==typeof ext.detail_info.pc_realtime_price?"":baidu.template._encodeHTML(ext.detail_info.pc_realtime_price),"</span>                "):parseInt(ext.detail_info.price)&&_template_fun_array.push("                    <span class='left-header-reference-label'>参考价:</span>                    <span class='left-header-reference-price'>￥","undefined"==typeof ext.detail_info.price?"":baidu.template._encodeHTML(ext.detail_info.price),"</span>                "),_template_fun_array.push("            </div>            ")),_template_fun_array.push("            "),(datas.aoi_name||ext.detail_info.std_tag)&&(_template_fun_array.push("                <div class='generalHead-left-header-aoitag animation-common'>                    "),"scope"==datas.ext.src_name&&datas.scope_tag?_template_fun_array.push("                         <span class='left-header-tag'>","undefined"==typeof datas.scope_tag?"":baidu.template._encodeHTML(datas.scope_tag),"</span>                    "):(_template_fun_array.push("                        "),datas.aoi_name&&_template_fun_array.push("                            <span class='left-header-aoitag'>","undefined"==typeof datas.aoi_name?"":baidu.template._encodeHTML(datas.aoi_name),"</span>                        "),_template_fun_array.push("                        "),ext.detail_info.std_tag&&_template_fun_array.push("                            <span class='left-header-stdtag'>","undefined"==typeof std_tag?"":baidu.template._encodeHTML(std_tag),"</span>                        "),_template_fun_array.push("                    ")),_template_fun_array.push("                </div>            ")),_template_fun_array.push("        </div>        <div class='generalHead-right-header animation-common'>            <div class='generalHead-right-route generalHead-right-route-to animation-common' id='route-go'>                <span class='generalHead-pic generalHead-right-route-icon animation-common'></span>                <span class='generalHead-right-route-text time-delay animation-common'>到这去</span>            </div>            <div class=\"generalHead-right-route-split\">            </div>            <div class='generalHead-right-route generalHead-right-route-from animation-common' id='route-from'>                <span class='generalHead-pic generalHead-right-route-icon animation-common'></span>                <span class='generalHead-right-route-text time-delay animation-common'>从这出发</span>            </div>        </div>    </div> </div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],datas=this.preProcessTemplateData(data),html=template(datas);return this.data=data,html}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"poidetail:widget/ui/generalHead/generalHead.js",ln:23})}},preProcessTemplateData:function(e){if(e&&e.ext&&e.ext.detail_info&&e.ext.detail_info.std_tag){var a=e.ext.detail_info.std_tag.split(";");a[1]&&(e.std_tag=a[1])}if(e&&e.ext&&e.ext.detail_info&&e.ext.detail_info.tag&&(T.isString(e.ext.detail_info.tag)?e.scope_tag=e.ext.detail_info.tag.replace(/,/g," "):T.isArray(e.ext.detail_info.tag)&&(e.scope_tag=e.ext.detail_info.tag.join(" "))),e&&e.aoi_name){var t=e.aoi_name.split(";");t[0]&&(e.aoi_name=t[0])}if(e&&e.ext&&e.ext.detail_info&&e.ext.detail_info.mbc&&e.ext.detail_info.mbc.markv){var i=""+e.ext.detail_info.mbc.markv;"2"===i&&(e.verify=!0)}return e},renderComplete:function(e,a){function t(e,a){var t=e.target;if(t){var n=t.point;n&&mapUtil.getGEORevertAddress(n,function(t){var n=t.content,r=n.address,d=n.point&&n.point.x+","+n.point.y||"";0===a?(g.startPointName=r,window.startPoi.name=r,searchbox.setState("route",{start:{wd:r,pt:d}}),g.isOpenStartPoiInfoWindow===!0&&i(e,0)):(g.endPointName=r,window.endPoi.name=r,searchbox.setState("route",{end:{wd:r,pt:d}}),g.isOpenEndPoiInfoWindow===!0&&i(e,1))})}}function i(e,a){var t=e.target.getPoint();util.loadSearchInfo(function(i){var n=i.createSearchInfoWnd({title:0===a?g.startPointName:g.endPointName},{x:t.lng,y:t.lat,isMenu:!0});i.openSearchInfoWnd(n,e.target,{pano:!0,panoPoint:t}),n.addEventListener("open",function(){i.switchInfoWndTab(1,"iw_esn")})})}try{var n,r=this._data_,d=r.name,o=r.uid,l=(r.addr,r.ext.detail_info.point);l&&r.navi_x&&r.navi_y?n=(r.navi_x||"")+","+(r.navi_y||""):(l=r.geo,l=l.split("|"),n=l.pop(),n=n.replace(/;$/,""));var g=(r.city_id,this);e.find("#route-from").on("click",function(e){e.stopPropagation(),window.temp&&window.temp.detailInfoPop&&window.temp.detailInfoPop.close(),a.foldCard(!0),searchbox.setState("route",{start:{wd:d,uid:o,pt:n}},{fromDetail:{uid:o,name:d}}),g.startPointName=d;var p=l.x+","+l.y;if(window.startPoi?window.startPoi.setPoint(new BMap.Point(l.x,l.y)):(window.startPoi=mapUtil.addDestPoi(p,constants.DEST_START,{startAnimation:"marker-raise"}),window.startPoi.enableDragging(),window.startPoi.addEventListener("click",function(e){i(e,0)}),window.startPoi.addEventListener("ondragstart",function(){this.infoWindow&&this.infoWindow.isOpen()?(this.closeInfoWindow(),g.isOpenStartPoiInfoWindow=!0):g.isOpenStartPoiInfoWindow=!1}),window.startPoi.addEventListener("ondragend",function(e){t(e,0)})),window.startPoi.name=r.name,r.isBizPoi){var s=r.content.uid;addStat("poidetail.head.fromHereBizPoi","click",{uid:s})}else addStat("poidetail.head.fromHere","click");g.addSEMStatLog()}),e.find("#route-go").on("click",function(e){e.stopPropagation(),window.temp&&window.temp.detailInfoPop&&window.temp.detailInfoPop.close(),a.foldCard(!0),searchbox.setState("route",{end:{wd:d,uid:o,pt:n}},{fromDetail:{uid:o,name:d}}),g.endPointName=d;var p=l.x+","+l.y;if(window.endPoi?window.endPoi.setPoint(new BMap.Point(l.x,l.y)):(window.endPoi=mapUtil.addDestPoi(p,constants.DEST_END,{startAnimation:"marker-raise"}),window.endPoi.enableDragging(),window.endPoi.addEventListener("click",function(e){i(e,1)}),window.endPoi.addEventListener("ondragstart",function(){this.infoWindow&&this.infoWindow.isOpen()?(this.closeInfoWindow(),g.isOpenEndPoiInfoWindow=!0):g.isOpenEndPoiInfoWindow=!1}),window.endPoi.addEventListener("ondragend",function(e){t(e,1)})),window.endPoi.name=r.name,r.isBizPoi){var s=r.content.uid;addStat("poidetail.head.goHereBizPoi","click",{uid:s})}else addStat("poidetail.head.goHere","click");g.addSEMStatLog()})}catch(p){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:p.message||p.description,path:"poidetail:widget/ui/generalHead/generalHead.js",ln:264})}},addSEMStatLog:function(){var e=this.data.bizlink;if(e&&e.result&&e.result[0]&&e.result[0].ext){var a=e.result[0].ext;a.ad_page_logs&&addStat("poidetail.bizsem.click","click",{ad_page_logs:a.ad_page_logs})}},name:"generalHead"})});