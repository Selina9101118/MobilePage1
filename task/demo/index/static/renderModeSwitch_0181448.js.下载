define("common:widget/ui/renderModeSwitch/renderModeSwitch.js",function(require,exports,module){require.loadCss({content:"#renderModeSwitch{position:absolute;bottom:10px;left:-29px;height:24px;width:24px;-webkit-transition-property:width,background-color;transition-property:width,background-color;-webkit-transition-duration:.4s;transition-duration:.4s}#renderModeSwitch .render-mode-tips-button{height:24px;width:24px;cursor:pointer;position:absolute;background:url(//webmap1.bdimg.com/wolfman/static/common/images/new/render-mode-switch_b69f6e1.png) no-repeat 0 0;background-size:39px 24px}#renderModeSwitch .black-tips{position:absolute;white-space:nowrap;color:#fff;bottom:33px;right:0;border-radius:2px;height:13px;padding:7px;padding-right:27px;background-color:rgba(0,0,0,.8);-webkit-transition-property:right,opacity;transition-property:right,opacity;-webkit-transition-duration:.4s;transition-duration:.4s}#renderModeSwitch .black-tips .close-button{background:url(//webmap1.bdimg.com/wolfman/static/common/images/new/render-mode-switch_b69f6e1.png) no-repeat 0 0;background-size:39px 24px;background-position:-24px 0;width:15px;height:15px;cursor:pointer;position:absolute;right:6px;top:6px}#renderModeSwitch .black-tips a{color:#5fa7fe;text-decoration:none}#renderModeSwitch .black-tips:after{content:'';position:absolute;top:27px;right:8px;margin-left:-6px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid rgba(0,0,0,.8)}@media only screen and (-webkit-min-device-pixel-ratio:2),(-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx),(min-resolution:192dpi){#renderModeSwitch .render-mode-tips-button{background-image:url(//webmap0.bdimg.com/wolfman/static/common/images/new/render-mode-switch2x_6627283.png)}#renderModeSwitch .black-tips .close-button{background-image:url(//webmap0.bdimg.com/wolfman/static/common/images/new/render-mode-switch2x_6627283.png)}}",name:"renderModeSwitch"});var storage=window.localStorage,renderModeSwitch={init:function(e){this._map=e;var i=this,t=!1;storage&&storage.getItem("user-render-mode")&&(t=!0,alog("cus.fire","count","z_showtips_byuser"),this.renderAndBind()),t||"webgl"!==e.getRenderType()||(this._waitForFirstTimer=setTimeout(function(){alog("cus.fire","count","z_showtips_firsttile"),i.renderAndBind("firsttile")},3e3),e.on("fpsdata_ready",function(t){var o=t.fps;50>o&&(alog("cus.fire","count","z_showtips_lowfps"),i.renderAndBind("lowfps"),e.off("fpsdata_ready",arguments.callee))}),e.on("firsttilesloaded",function(){clearTimeout(i._waitForFirstTimer)}))},renderAndBind:function(e){try{if(this._rendered)return;this.render();var i=this;this.hideTimer=setTimeout(function(){i.hideTips()},5e3),this.bind(),this._rendered=!0,this._tipsVisible=!0;var t=this._map.deviceInfo;if(!t||!e)return;addStat("webgl.info."+e,"show",{da_e_name:"pcmapwebgl",earth_hardware_renderer:t.hardwareInfo.renderer,earth_hardware_vendor:t.hardwareInfo.vendor,browser:t.platformInfo.browser.family+" "+t.platformInfo.browser.major,os:t.platformInfo.os.family})}catch(o){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:o.message||o.description,path:"common:widget/ui/renderModeSwitch/renderModeSwitch.js",ln:73})}},render:function(){try{var tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div id="renderModeSwitch">    <div id="render-mode-tips" class="black-tips">        <div class="">            ',"undefined"==typeof displayInfo?"":baidu.template._encodeHTML(displayInfo),' <span><a id="render-mode-switch-button">',"undefined"==typeof switchInfo?"":baidu.template._encodeHTML(switchInfo),'</a></span>        </div>        <div class="close-button"></div>    </div>    <div class="render-mode-tips-button" title="切换地图渲染方式">    </div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],displayInfo,switchInfo;"webgl"===this._map.getRenderType()?(displayInfo="已为您渲染全新3D地图",switchInfo="返回普通地图模式"):(displayInfo="已为您切换为普通地图模式",switchInfo="切换到3D地图模式"),baidu("#mapType-wrapper").append(tpl({displayInfo:displayInfo,switchInfo:switchInfo}))}catch(e){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:e.message||e.description,path:"common:widget/ui/renderModeSwitch/renderModeSwitch.js",ln:90})}},bind:function(){var e=this;baidu(".render-mode-tips-button").on("click",function(i){try{e._tipsVisible?e.hideTips():(e._userClicked=!0,e.showTips()),i.stopPropagation()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"common:widget/ui/renderModeSwitch/renderModeSwitch.js",ln:102})}}),baidu("#renderModeSwitch .close-button").on("click",function(i){try{e.hideTimer&&clearTimeout(e.hideTimer),e._userClicked=!0,e.hideTips(),i.stopPropagation()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"common:widget/ui/renderModeSwitch/renderModeSwitch.js",ln:108})}}),baidu("#render-mode-tips").on("mouseover",function(){try{e.hideTimer&&(clearTimeout(e.hideTimer),e.hideTimer=null)}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"common:widget/ui/renderModeSwitch/renderModeSwitch.js",ln:114})}}),baidu("#render-mode-tips").on("mouseout",function(){try{e._userClicked!==!0&&(e.hideTimer=setTimeout(function(){e.hideTips(),e.hideTimer=null},5e3))}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"common:widget/ui/renderModeSwitch/renderModeSwitch.js",ln:122})}}),baidu("#render-mode-switch-button").on("click",function(i){try{var t=e._map.getRenderType();if("webgl"!==t)try{storage.setItem("user-render-mode","webgl"),alog("cus.fire","count","z_showtips_towebgl")}catch(i){}else try{storage.setItem("user-render-mode","canvas"),alog("cus.fire","count","z_showtips_tocanvas")}catch(i){}setTimeout(function(){var e=require("common:widget/ui/mapShare/MapShare.js"),i=e.getLink(null,!0);window.location.href=i},150),i.stopPropagation()}catch(i){"undefined"!=typeof alog&&alog("exception.fire","catch",{msg:i.message||i.description,path:"common:widget/ui/renderModeSwitch/renderModeSwitch.js",ln:147})}}),listener.on("com.subway","load",function(){baidu("#renderModeSwitch").hide()}),listener.on("com.subway","unload",function(){baidu("#renderModeSwitch").show()})},showTips:function(){baidu("#render-mode-tips").show(),this._tipsVisible=!0},hideTips:function(){baidu("#render-mode-tips").hide(),this._tipsVisible=!1}};module.exports=renderModeSwitch});